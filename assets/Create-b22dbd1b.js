import{i as de,S as ce,a as ve}from"./request-902a150c.js";import{m as fe}from"./mainHeader-53585248.js";import{E as pe,y as q,P as me,I as E,x as z,Q as he,f as F,i as le,k as t,z as _e,u as ge,o as Q,j as Y,w as o,l as g,m as O,n as s,s as ye,v as be}from"./vue-router.esm-bundler-f47d5b1d.js";import{c as Ce,t as xe,r as ke,v as Fe,m as we}from"./tableware_icon-a25ec4a8.js";import{_ as Ie}from"./plugin-vueexport-helper-c27b6911.js";import{a as oe,_ as I,i as ae,b as G,P as $,u as te,t as Se,m as M}from"./useConfigInject-968d6b94.js";import{o as Pe}from"./omit-953a655d.js";import"./index-f452e732.js";var J=Symbol("ContextProps"),X=Symbol("InternalContextProps"),Z={id:pe(function(){}),onFieldBlur:function(){},onFieldChange:function(){},clearValidate:function(){}},ee={addFormItemField:function(){},removeFormItemField:function(){}},ue=function(){var e=q(X,ee),r=Symbol("FormItemFieldKey"),n=he();return e.addFormItemField(r,n.type),me(function(){e.removeFormItemField(r)}),E(X,ee),E(J,Z),q(J,Z)};z({compatConfig:{MODE:3},name:"AFormItemRest",setup:function(e,r){var n=r.slots;return E(X,ee),E(J,Z),function(){var m;return(m=n.default)===null||m===void 0?void 0:m.call(n)}}});var Be=["prefixCls","name","id","type","disabled","readonly","tabindex","autofocus","value","required"],Re={prefixCls:String,name:String,id:String,type:String,defaultChecked:{type:[Boolean,Number],default:void 0},checked:{type:[Boolean,Number],default:void 0},disabled:Boolean,tabindex:{type:[Number,String]},readonly:Boolean,autofocus:Boolean,value:$.any,required:Boolean};const Ke=z({compatConfig:{MODE:3},name:"Checkbox",inheritAttrs:!1,props:de(Re,{prefixCls:"rc-checkbox",type:"checkbox",defaultChecked:!1}),emits:["click","change"],setup:function(e,r){var n=r.attrs,m=r.emit,k=r.expose,v=F(e.checked===void 0?e.defaultChecked:e.checked),h=F();le(function(){return e.checked},function(){v.value=e.checked}),k({focus:function(){var l;(l=h.value)===null||l===void 0||l.focus()},blur:function(){var l;(l=h.value)===null||l===void 0||l.blur()}});var f=F(),P=function(l){if(!e.disabled){e.checked===void 0&&(v.value=l.target.checked),l.shiftKey=f.value;var x={target:I(I({},e),{},{checked:l.target.checked}),stopPropagation:function(){l.stopPropagation()},preventDefault:function(){l.preventDefault()},nativeEvent:l};e.checked!==void 0&&(h.value.checked=!!e.checked),m("change",x),f.value=!1}},C=function(l){m("click",l),f.value=l.shiftKey};return function(){var y,l=e.prefixCls,x=e.name,u=e.id,i=e.type,a=e.disabled,c=e.readonly,w=e.tabindex,_=e.autofocus,U=e.value,p=e.required,D=oe(e,Be),B=n.class,b=n.onFocus,R=n.onBlur,K=n.onKeydown,N=n.onKeypress,j=n.onKeyup,V=I(I({},D),n),L=Object.keys(V).reduce(function(ne,A){return(A.substr(0,5)==="aria-"||A.substr(0,5)==="data-"||A==="role")&&(ne[A]=V[A]),ne},{}),H=ae(l,B,(y={},G(y,"".concat(l,"-checked"),v.value),G(y,"".concat(l,"-disabled"),a),y)),W=I(I({name:x,id:u,type:i,readonly:c,disabled:a,tabindex:w,class:"".concat(l,"-input"),checked:!!v.value,autofocus:_,value:U},L),{},{onChange:P,onClick:C,onFocus:b,onBlur:R,onKeydown:K,onKeypress:N,onKeyup:j,required:p});return t("span",{class:H},[t("input",I({ref:h},W),null),t("span",{class:"".concat(l,"-inner")},null)])}}});var Ne=["prefixCls","id"],ie=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:$.any,name:String,id:String,autofocus:{type:Boolean,default:void 0},onChange:Function,onFocus:Function,onBlur:Function,onClick:Function,"onUpdate:checked":Function,"onUpdate:value":Function}};const S=z({compatConfig:{MODE:3},name:"ARadio",props:ie(),setup:function(e,r){var n=r.emit,m=r.expose,k=r.slots,v=ue(),h=F(),f=q("radioGroupContext",void 0),P=te("radio",e),C=P.prefixCls,y=P.direction,l=function(){h.value.focus()},x=function(){h.value.blur()};m({focus:l,blur:x});var u=function(c){var w=c.target.checked;n("update:checked",w),n("update:value",w),n("change",c),v.onFieldChange()},i=function(c){n("change",c),f&&f.onRadioChange&&f.onRadioChange(c)};return function(){var a,c=f;e.prefixCls;var w=e.id,_=w===void 0?v.id.value:w,U=oe(e,Ne),p=I({prefixCls:C.value,id:_},Pe(U,["onUpdate:checked","onUpdate:value"]));c?(p.name=c.props.name,p.onChange=i,p.checked=e.value===c.stateValue.value,p.disabled=e.disabled||c.props.disabled):p.onChange=u;var D=ae((a={},G(a,"".concat(C.value,"-wrapper"),!0),G(a,"".concat(C.value,"-wrapper-checked"),p.checked),G(a,"".concat(C.value,"-wrapper-disabled"),p.disabled),G(a,"".concat(C.value,"-wrapper-rtl"),y.value==="rtl"),a));return t("label",{class:D},[t(Ke,I(I({},p),{},{type:"radio",ref:h}),null),k.default&&t("span",null,[k.default()])])}}});var je=Se("large","default","small"),Ge=function(){return{prefixCls:String,value:$.any,size:$.oneOf(je),options:{type:Array},disabled:{type:Boolean,default:void 0},name:String,buttonStyle:{type:String,default:"outline"},id:String,optionType:{type:String,default:"default"},onChange:Function,"onUpdate:value":Function}};const se=z({compatConfig:{MODE:3},name:"ARadioGroup",props:Ge(),setup:function(e,r){var n=r.slots,m=r.emit,k=ue(),v=te("radio",e),h=v.prefixCls,f=v.direction,P=v.size,C=F(e.value),y=F(!1);le(function(){return e.value},function(x){C.value=x,y.value=!1});var l=function(u){var i=C.value,a=u.target.value;"value"in e||(C.value=a),!y.value&&a!==i&&(y.value=!0,m("update:value",a),m("change",u),k.onFieldChange()),_e(function(){y.value=!1})};return E("radioGroupContext",{onRadioChange:l,stateValue:C,props:e}),function(){var x,u=e.options,i=e.optionType,a=e.buttonStyle,c=e.id,w=c===void 0?k.id.value:c,_="".concat(h.value,"-group"),U=ae(_,"".concat(_,"-").concat(a),(x={},G(x,"".concat(_,"-").concat(P.value),P.value),G(x,"".concat(_,"-rtl"),f.value==="rtl"),x)),p=null;if(u&&u.length>0){var D=i==="button"?"".concat(h.value,"-button"):h.value;p=u.map(function(b){if(typeof b=="string"||typeof b=="number")return t(S,{key:b,prefixCls:D,disabled:e.disabled,value:b,checked:C.value===b},{default:function(){return[b]}});var R=b.value,K=b.disabled,N=b.label;return t(S,{key:"radio-group-value-options-".concat(R),prefixCls:D,disabled:K||e.disabled,value:R,checked:C.value===R},{default:function(){return[N]}})})}else{var B;p=(B=n.default)===null||B===void 0?void 0:B.call(n)}return t("div",{class:U,id:w},[p])}}}),re=z({compatConfig:{MODE:3},name:"ARadioButton",props:ie(),setup:function(e,r){var n=r.slots,m=te("radio-button",e),k=m.prefixCls,v=q("radioGroupContext",void 0);return function(){var h,f=I(I({},e),{},{prefixCls:k.value});return v&&(f.onChange=v.onRadioChange,f.checked=f.value===v.stateValue.value,f.disabled=f.disabled||v.props.disabled),t(S,f,{default:function(){return[(h=n.default)===null||h===void 0?void 0:h.call(n)]}})}}});S.Group=se;S.Button=re;S.install=function(d){return d.component(S.name,S),d.component(S.Group.name,S.Group),d.component(S.Button.name,S.Button),d};const T=d=>(ye("data-v-786fe70f"),d=d(),be(),d),Ue={class:"page"},De=["src"],Ve={class:"input-section"},Ae={class:"my-1 flex"},Oe=T(()=>g("span",null,"How much food did you finish overall?",-1)),Ee={class:"w-full text-center"},ze={class:"input-section"},Te={class:"my-1 flex"},He=T(()=>g("span",null,"How much rice/noodle did you finish?",-1)),Me={class:"w-full text-center"},qe={class:"input-section"},$e={class:"my-1 flex"},Le=T(()=>g("span",null,"How much vegetable did you finish?",-1)),We={class:"w-full text-center"},Qe={class:"input-section"},Ye={class:"my-1 flex"},Je=T(()=>g("span",null,"How much meat did you finish?",-1)),Xe={class:"w-full text-center"},Ze=T(()=>g("div",{class:"text-gray-400 text-sm mx-6"}," * For Not Applicable food type (i.e., not in your meal), please select 100% ",-1)),ea={__name:"Create",setup(d){const e=F(),r=F(),n=F(),m=F(),k=F();let v=null;const h=F(null),f=F(!1),P=()=>{h.value.click()},C=async u=>{let i=u.target.files[0];const a=await y(i,{quality:1,type:"image/jpeg"});k.value=URL.createObjectURL(i),v=a},y=async(u,{quality:i=1,type:a=u.type})=>new Promise((c,w)=>{let _=new FileReader;_.onloadend=function(U){var p=new Image;p.src=U.target.result,p.style.imageOrientation="from-image",p.onload=async function(D){let{width:B,height:b}=p,R=400,K=400,N=B,j=b;(B>R||b>K)&&(B/b>R/K?(N=R,j=Math.round(R*(b/B))):(j=K,N=Math.round(K*(B/b))));var V=document.createElement("canvas");V.width=N,V.height=j;var L=V.getContext("2d");L.drawImage(p,0,0,N,j);const H=await new Promise(W=>V.toBlob(W,a,i));c(new File([H],u.name,{type:H.type}))}},_.readAsDataURL(u)}),l=ge(),x=async()=>{if(v===null){M.error("Please take a photo first");return}if(!r.value||!n.value||!m.value||!e.value){M.error("Please input your completeness");return}f.value=!0;let u=new FormData;u.append("pic",v),u.append("rice",Number(r.value)),u.append("vegetable",Number(n.value)),u.append("meat",Number(m.value)),u.append("overall",Number(e.value));let i=await ve("post","feedback",u,!0,{"Content-Type":"multipart/form-data"});f.value=!1,i.error===!1&&(M.success("successfully submitted!"),i.result.new_badge&&M.success("ðŸŽ‰You got new a badge!ðŸŽ‰",10),l.push({name:"Home",params:{needReload:!0}}),e.value=null,r.value=null,n.value=null,m.value=null,k.value=null,v=null)};return(u,i)=>{const a=re,c=se,w=ce;return Q(),Y("div",Ue,[t(fe),t(w,{spinning:f.value,tip:"submitting"},{default:o(()=>[g("input",{ref_key:"uploadFile",ref:h,type:"file",style:{display:"none"},accept:"image/*",capture:"camera",name:"file",onChange:C},null,544),k.value?(Q(),Y("img",{key:0,class:"pic-preview",src:k.value,onClick:P},null,8,De)):(Q(),Y("div",{key:1,class:"pic-placehoder flex place-content-center",onClick:P},[t(O(Ce),{class:"camera-image place-self-center"})])),g("div",Ve,[g("div",Ae,[t(O(xe),{class:"input-icon",fill:""}),Oe]),g("div",Ee,[t(c,{value:e.value,"onUpdate:value":i[0]||(i[0]=_=>e.value=_),"button-style":"solid",size:"small"},{default:o(()=>[t(a,{value:"0"},{default:o(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:o(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:o(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:o(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:o(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:o(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),g("div",ze,[g("div",Te,[t(O(ke),{class:"input-icon",fill:"#F39221"}),He]),g("div",Me,[t(c,{value:r.value,"onUpdate:value":i[1]||(i[1]=_=>r.value=_),"button-style":"solid",size:"small"},{default:o(()=>[t(a,{value:"0"},{default:o(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:o(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:o(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:o(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:o(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:o(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),g("div",qe,[g("div",$e,[t(O(Fe),{class:"input-icon",fill:"#68A885"}),Le]),g("div",We,[t(c,{value:n.value,"onUpdate:value":i[2]||(i[2]=_=>n.value=_),"button-style":"solid",size:"small"},{default:o(()=>[t(a,{value:"0"},{default:o(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:o(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:o(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:o(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:o(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:o(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),g("div",Qe,[g("div",Ye,[t(O(we),{class:"input-icon",fill:"#A81E2D"}),Je]),g("div",Xe,[t(c,{value:m.value,"onUpdate:value":i[3]||(i[3]=_=>m.value=_),"button-style":"solid",size:"small"},{default:o(()=>[t(a,{value:"0"},{default:o(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:o(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:o(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:o(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:o(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:o(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),Ze,g("div",{class:"btn m-auto text-white text-center font-bold",onClick:x}," Submit ")]),_:1},8,["spinning"])])}}},ra=Ie(ea,[["__scopeId","data-v-786fe70f"]]);export{ra as default};
