import{i as de,S as ce,a as ve}from"./request-ebd6cc41.js";import{m as fe}from"./mainHeader-df61548e.js";import{l as pe,J as q,h as me,R as z,f as E,i as he,k as F,m as le,j as t,n as _e,x as ge,o as J,z as Y,w as o,A as g,B as O,D as s,H as ye,I as be}from"./vue-router.esm-bundler-d94c5ebd.js";import{c as Ce,t as xe,r as ke,v as Fe,m as we}from"./tableware_icon-ddba4fc0.js";import{_ as Ie}from"./plugin-vueexport-helper-c27b6911.js";import{l as oe,_ as I,j as ae,b as G,P as $,u as te,y as Se,w as M}from"./useConfigInject-855253b5.js";import{o as Be}from"./omit-112ceb98.js";import"./index-8bb5f63b.js";var Q=Symbol("ContextProps"),X=Symbol("InternalContextProps"),Z={id:pe(function(){}),onFieldBlur:function(){},onFieldChange:function(){},clearValidate:function(){}},ee={addFormItemField:function(){},removeFormItemField:function(){}},ue=function(){var e=q(X,ee),r=Symbol("FormItemFieldKey"),n=he();return e.addFormItemField(r,n.type),me(function(){e.removeFormItemField(r)}),z(X,ee),z(Q,Z),q(Q,Z)};E({compatConfig:{MODE:3},name:"AFormItemRest",setup:function(e,r){var n=r.slots;return z(X,ee),z(Q,Z),function(){var m;return(m=n.default)===null||m===void 0?void 0:m.call(n)}}});var Pe=["prefixCls","name","id","type","disabled","readonly","tabindex","autofocus","value","required"],Re={prefixCls:String,name:String,id:String,type:String,defaultChecked:{type:[Boolean,Number],default:void 0},checked:{type:[Boolean,Number],default:void 0},disabled:Boolean,tabindex:{type:[Number,String]},readonly:Boolean,autofocus:Boolean,value:$.any,required:Boolean};const je=E({compatConfig:{MODE:3},name:"Checkbox",inheritAttrs:!1,props:de(Re,{prefixCls:"rc-checkbox",type:"checkbox",defaultChecked:!1}),emits:["click","change"],setup:function(e,r){var n=r.attrs,m=r.emit,k=r.expose,v=F(e.checked===void 0?e.defaultChecked:e.checked),h=F();le(function(){return e.checked},function(){v.value=e.checked}),k({focus:function(){var l;(l=h.value)===null||l===void 0||l.focus()},blur:function(){var l;(l=h.value)===null||l===void 0||l.blur()}});var f=F(),B=function(l){if(!e.disabled){e.checked===void 0&&(v.value=l.target.checked),l.shiftKey=f.value;var x={target:I(I({},e),{},{checked:l.target.checked}),stopPropagation:function(){l.stopPropagation()},preventDefault:function(){l.preventDefault()},nativeEvent:l};e.checked!==void 0&&(h.value.checked=!!e.checked),m("change",x),f.value=!1}},C=function(l){m("click",l),f.value=l.shiftKey};return function(){var y,l=e.prefixCls,x=e.name,u=e.id,i=e.type,a=e.disabled,c=e.readonly,w=e.tabindex,_=e.autofocus,D=e.value,p=e.required,U=oe(e,Pe),P=n.class,b=n.onFocus,R=n.onBlur,j=n.onKeydown,K=n.onKeypress,N=n.onKeyup,A=I(I({},U),n),L=Object.keys(A).reduce(function(ne,V){return(V.substr(0,5)==="aria-"||V.substr(0,5)==="data-"||V==="role")&&(ne[V]=A[V]),ne},{}),T=ae(l,P,(y={},G(y,"".concat(l,"-checked"),v.value),G(y,"".concat(l,"-disabled"),a),y)),W=I(I({name:x,id:u,type:i,readonly:c,disabled:a,tabindex:w,class:"".concat(l,"-input"),checked:!!v.value,autofocus:_,value:D},L),{},{onChange:B,onClick:C,onFocus:b,onBlur:R,onKeydown:j,onKeypress:K,onKeyup:N,required:p});return t("span",{class:T},[t("input",I({ref:h},W),null),t("span",{class:"".concat(l,"-inner")},null)])}}});var Ke=["prefixCls","id"],ie=function(){return{prefixCls:String,checked:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},isGroup:{type:Boolean,default:void 0},value:$.any,name:String,id:String,autofocus:{type:Boolean,default:void 0},onChange:Function,onFocus:Function,onBlur:Function,onClick:Function,"onUpdate:checked":Function,"onUpdate:value":Function}};const S=E({compatConfig:{MODE:3},name:"ARadio",props:ie(),setup:function(e,r){var n=r.emit,m=r.expose,k=r.slots,v=ue(),h=F(),f=q("radioGroupContext",void 0),B=te("radio",e),C=B.prefixCls,y=B.direction,l=function(){h.value.focus()},x=function(){h.value.blur()};m({focus:l,blur:x});var u=function(c){var w=c.target.checked;n("update:checked",w),n("update:value",w),n("change",c),v.onFieldChange()},i=function(c){n("change",c),f&&f.onRadioChange&&f.onRadioChange(c)};return function(){var a,c=f;e.prefixCls;var w=e.id,_=w===void 0?v.id.value:w,D=oe(e,Ke),p=I({prefixCls:C.value,id:_},Be(D,["onUpdate:checked","onUpdate:value"]));c?(p.name=c.props.name,p.onChange=i,p.checked=e.value===c.stateValue.value,p.disabled=e.disabled||c.props.disabled):p.onChange=u;var U=ae((a={},G(a,"".concat(C.value,"-wrapper"),!0),G(a,"".concat(C.value,"-wrapper-checked"),p.checked),G(a,"".concat(C.value,"-wrapper-disabled"),p.disabled),G(a,"".concat(C.value,"-wrapper-rtl"),y.value==="rtl"),a));return t("label",{class:U},[t(je,I(I({},p),{},{type:"radio",ref:h}),null),k.default&&t("span",null,[k.default()])])}}});var Ne=Se("large","default","small"),Ge=function(){return{prefixCls:String,value:$.any,size:$.oneOf(Ne),options:{type:Array},disabled:{type:Boolean,default:void 0},name:String,buttonStyle:{type:String,default:"outline"},id:String,optionType:{type:String,default:"default"},onChange:Function,"onUpdate:value":Function}};const se=E({compatConfig:{MODE:3},name:"ARadioGroup",props:Ge(),setup:function(e,r){var n=r.slots,m=r.emit,k=ue(),v=te("radio",e),h=v.prefixCls,f=v.direction,B=v.size,C=F(e.value),y=F(!1);le(function(){return e.value},function(x){C.value=x,y.value=!1});var l=function(u){var i=C.value,a=u.target.value;"value"in e||(C.value=a),!y.value&&a!==i&&(y.value=!0,m("update:value",a),m("change",u),k.onFieldChange()),_e(function(){y.value=!1})};return z("radioGroupContext",{onRadioChange:l,stateValue:C,props:e}),function(){var x,u=e.options,i=e.optionType,a=e.buttonStyle,c=e.id,w=c===void 0?k.id.value:c,_="".concat(h.value,"-group"),D=ae(_,"".concat(_,"-").concat(a),(x={},G(x,"".concat(_,"-").concat(B.value),B.value),G(x,"".concat(_,"-rtl"),f.value==="rtl"),x)),p=null;if(u&&u.length>0){var U=i==="button"?"".concat(h.value,"-button"):h.value;p=u.map(function(b){if(typeof b=="string"||typeof b=="number")return t(S,{key:b,prefixCls:U,disabled:e.disabled,value:b,checked:C.value===b},{default:function(){return[b]}});var R=b.value,j=b.disabled,K=b.label;return t(S,{key:"radio-group-value-options-".concat(R),prefixCls:U,disabled:j||e.disabled,value:R,checked:C.value===R},{default:function(){return[K]}})})}else{var P;p=(P=n.default)===null||P===void 0?void 0:P.call(n)}return t("div",{class:D,id:w},[p])}}}),re=E({compatConfig:{MODE:3},name:"ARadioButton",props:ie(),setup:function(e,r){var n=r.slots,m=te("radio-button",e),k=m.prefixCls,v=q("radioGroupContext",void 0);return function(){var h,f=I(I({},e),{},{prefixCls:k.value});return v&&(f.onChange=v.onRadioChange,f.checked=f.value===v.stateValue.value,f.disabled=f.disabled||v.props.disabled),t(S,f,{default:function(){return[(h=n.default)===null||h===void 0?void 0:h.call(n)]}})}}});S.Group=se;S.Button=re;S.install=function(d){return d.component(S.name,S),d.component(S.Group.name,S.Group),d.component(S.Button.name,S.Button),d};const H=d=>(ye("data-v-786fe70f"),d=d(),be(),d),De={class:"page"},Ue=["src"],Ae={class:"input-section"},Ve={class:"my-1 flex"},Oe=H(()=>g("span",null,"How much food did you finish overall?",-1)),ze={class:"w-full text-center"},Ee={class:"input-section"},He={class:"my-1 flex"},Te=H(()=>g("span",null,"How much rice/noodle did you finish?",-1)),Me={class:"w-full text-center"},qe={class:"input-section"},$e={class:"my-1 flex"},Le=H(()=>g("span",null,"How much vegetable did you finish?",-1)),We={class:"w-full text-center"},Je={class:"input-section"},Ye={class:"my-1 flex"},Qe=H(()=>g("span",null,"How much meat did you finish?",-1)),Xe={class:"w-full text-center"},Ze=H(()=>g("div",{class:"text-gray-400 text-sm mx-6"}," * For Not Applicable food type (i.e., not in your meal), please select 100% ",-1)),ea={__name:"Create",setup(d){const e=F(),r=F(),n=F(),m=F(),k=F();let v=null;const h=F(null),f=F(!1),B=()=>{h.value.click()},C=async u=>{let i=u.target.files[0];const a=await y(i,{quality:1,type:"image/jpeg"});k.value=URL.createObjectURL(i),v=a},y=async(u,{quality:i=1,type:a=u.type})=>new Promise((c,w)=>{let _=new FileReader;_.onloadend=function(D){var p=new Image;p.src=D.target.result,p.style.imageOrientation="from-image",p.onload=async function(U){let{width:P,height:b}=p,R=400,j=400,K=P,N=b;(P>R||b>j)&&(P/b>R/j?(K=R,N=Math.round(R*(b/P))):(N=j,K=Math.round(j*(P/b))));var A=document.createElement("canvas");A.width=K,A.height=N;var L=A.getContext("2d");L.drawImage(p,0,0,K,N);const T=await new Promise(W=>A.toBlob(W,a,i));c(new File([T],u.name,{type:T.type}))}},_.readAsDataURL(u)}),l=ge(),x=async()=>{if(v===null){M.error("Please take a photo first");return}if(!r.value||!n.value||!m.value||!e.value){M.error("Please input your completeness");return}f.value=!0;let u=new FormData;u.append("pic",v),u.append("rice",Number(r.value)),u.append("vegetable",Number(n.value)),u.append("meat",Number(m.value)),u.append("overall",Number(e.value));let i=await ve("post","feedback",u,!0,{"Content-Type":"multipart/form-data"});f.value=!1,i.error===!1&&(M.success("successfully submitted!"),i.result.new_badge&&M.success("ðŸŽ‰You got new a badge!ðŸŽ‰",10),l.push({name:"Home",params:{needReload:!0}}),e.value=null,r.value=null,n.value=null,m.value=null,k.value=null,v=null)};return(u,i)=>{const a=re,c=se,w=ce;return J(),Y("div",De,[t(fe),t(w,{spinning:f.value,tip:"submitting"},{default:o(()=>[g("input",{ref_key:"uploadFile",ref:h,type:"file",style:{display:"none"},accept:"image/*",capture:"camera",name:"file",onChange:C},null,544),k.value?(J(),Y("img",{key:0,class:"pic-preview",src:k.value,onClick:B},null,8,Ue)):(J(),Y("div",{key:1,class:"pic-placehoder flex place-content-center",onClick:B},[t(O(Ce),{class:"camera-image place-self-center"})])),g("div",Ae,[g("div",Ve,[t(O(xe),{class:"input-icon",fill:""}),Oe]),g("div",ze,[t(c,{value:e.value,"onUpdate:value":i[0]||(i[0]=_=>e.value=_),"button-style":"solid",size:"small"},{default:o(()=>[t(a,{value:"0"},{default:o(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:o(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:o(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:o(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:o(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:o(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),g("div",Ee,[g("div",He,[t(O(ke),{class:"input-icon",fill:"#F39221"}),Te]),g("div",Me,[t(c,{value:r.value,"onUpdate:value":i[1]||(i[1]=_=>r.value=_),"button-style":"solid",size:"small"},{default:o(()=>[t(a,{value:"0"},{default:o(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:o(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:o(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:o(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:o(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:o(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),g("div",qe,[g("div",$e,[t(O(Fe),{class:"input-icon",fill:"#68A885"}),Le]),g("div",We,[t(c,{value:n.value,"onUpdate:value":i[2]||(i[2]=_=>n.value=_),"button-style":"solid",size:"small"},{default:o(()=>[t(a,{value:"0"},{default:o(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:o(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:o(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:o(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:o(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:o(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),g("div",Je,[g("div",Ye,[t(O(we),{class:"input-icon",fill:"#A81E2D"}),Qe]),g("div",Xe,[t(c,{value:m.value,"onUpdate:value":i[3]||(i[3]=_=>m.value=_),"button-style":"solid",size:"small"},{default:o(()=>[t(a,{value:"0"},{default:o(()=>[s("0%")]),_:1}),t(a,{value:"20"},{default:o(()=>[s("20%")]),_:1}),t(a,{value:"40"},{default:o(()=>[s("40%")]),_:1}),t(a,{value:"60"},{default:o(()=>[s("60%")]),_:1}),t(a,{value:"80"},{default:o(()=>[s("80%")]),_:1}),t(a,{value:"100"},{default:o(()=>[s("100%")]),_:1})]),_:1},8,["value"])])]),Ze,g("div",{class:"btn m-auto text-white text-center font-bold",onClick:x}," Submit ")]),_:1},8,["spinning"])])}}},ra=Ie(ea,[["__scopeId","data-v-786fe70f"]]);export{ra as default};
